# Практикум 318 гр. -- проектное задание "Игра Вирусы"

## Постановка задачи

В задании требуется реализовать игру "Вирусы". Пример готовой реализации можно
посмотреть [здесь](https://metaschool.ru/pub/games/viruswar/viruswar.php).
Правила самой игры описаны ниже. Решение должно быть подготовлено в виде
git-репозитория, оформленного на кафедральном GitLab и содержащего все файлы
проекта. Проект пишется с соблюдением принципов ООП и должен состоять из
нескольких (два или более .cpp файла) модулей, которые должны собираться
программой CMake.  Для всех написанных классов необходимо реализовать
юнит-тесты с использованием библиотеки gtest, а также написать краткую
документацию.

## Критерии оценивания
 
Задание состоит из базовой и нескольких дополнительных частей. Помимо
реализованного функционала, проект будет оцениваться исходя из следующих
критериев:
- Использование системы контроля версий и системы сборки CMake. Важно не просто
  загрузить файлы в git на последнем этапе написания проекта, а *вести*
  разработку проекта в git с самого начала. Здесь будут оцениваться такие вещи
  как наличие проектной истории, осмысленные сообщения в коммитах и т.п.
- Наличие юнит-тестов и их полнота. Требуется написать юнит-тесты для всех
  публичных функций классов, которые покрывают основные варианты использования
  этих функций и возможные граничные ситуации.
- Документирование кода. Не следует писать комментарии к каждой строке, но все
  основные классы и публичные методы должны быть разумно документированы. Нужно
  уделить особое внимание описанию тех или иных особенностей использования
  методов.
- Проектирование классов. Недостаточно просто написать код в одной функции или
  одном классе, надо разбить программу на логические модули и разделить
  функционал по различным классам. Здесь будут оцениваться такие вещи как
  дублирование кода или функционала, оправданность того или иного
  проектировочного решения и т.п.
- Следование выбранному стилю кодирования.

## Правила игры

Игра для двух и более игроков на клетчатом поле 10x10. В этой игре каждый игрок
будет создавать и развивать свою колонию вирусов, стремясь уничтожить
противников.  Вирусы обозначаются любыми знаками, обычно, крестиками разных
цветов.  Игра ведётся по следующим правилам:

- Игроки ходят по-очереди. Ход каждого игрока состоит из трёх действий. За одно
  действие можно поставить одного своего вируса или съесть одного вражеского
  вируса, превратив его в свою крепость. Съеденные вирусы (крепости) съесть
  повторно уже нельзя.

- Действия пропускать нельзя. При невозможности совершить действие игрок
  проигрывает.

- Множество соседних (диагональные клетки также считаются соседними) друг с
  другом крепостей образуют цепь.

- Цепь называется живой, если рядом с одной из крепостей этой цепи стоит вирус
  того же самого игрока, иначе цепь -- мертвая.

- Поставить вирус или съесть вражеского вируса можно либо 1) на соседней клетке
  со своим живым (несъеденным) вирусом, либо 2) на соседней клетке со своей
  живой цепью.

- Первый игрок начинает ставить вирусы в левом верхнем углу, а второй -- в
  правом нижнем. Если игроков более двух (но не более четырёх), то третий игрок
  начинает в левом нижнем углу, а четвёртый -- в правом верхнем.

- Выигрывает тот единственный игрок, который остался в игре последним.

- Если игроков более, чем два, то вирусы проигравшего игрока остаются на поле,
  их могут съесть другие игроки.
 
## Базовая часть (6 баллов)

Базовая часть включает в себя реализацию логики игры для двух игроков в режиме
"hot-seat" (проверка правильности совершаемых ходов, обнаружение момента
окончания игры и выявление победителя) и пользовательского интерфейса (ввод
данных о совершаемых действиях, отображение ходов, сообщение о победе или
поражении). Логику нужно реализовывать в отдельном классе (например, можно его
назвать TGameLogic). Этот класс ничего не должен знать про пользовательский
интерфейс, т.е. логика взаимодействия TGameLogic и TDisplay должна находиться
где-то ещё.  Не стоит реализовывать эту логику в main.cpp, вместо этого надо
завести для этого отдельный класс (назовём его, например, TGameEngine).

За выполнение базовой части можно получить до 6 баллов. При выполнении задания
можно пользоваться настоящим шаблоном в качестве отправной точки.

## Дополнительные части задания

Дополнительные задания можно реализовывать *только* если была реализована
базовая часть задания. Должна быть реализована возможность настройки параметров
нестандартных вариантов игры без перекомпиляции программы. Такую настройку можно
осуществить по-разному, например: при помощи указания ключей и параметров через
командную строку; указанием настроек через специальный конфигурационный файл,
лежащий в одной директории с запускаемой программой и читающийся при её запуске;
или через реализацию настроек в графическом интерфейсе программы перед запуском
игры.

### Замкнутое игровое поле (1 балл)

Реализовать топологию тора на игровом поле, при которой клетки, находящиеся у
правого его края, являются соседними с клетками левого края, а клетки,
находящиеся у нижнего края поля, -- соседние с верхними. В этом режиме игры
первый игрок ставит свой первый вирус в любом месте поля. Второй 
игрок ставит свой первый вирус на расстоянии не менее 4 клеток от вирусов
первого игрока (соседние клетки считаются находящимися на расстоянии 1).
 
### Игра по сети (3 балла)

Реализовать возможность игры по сети.

### Игра с компьютером (до 3 баллов)

Реализовать искусственный интеллект "бота", который будет играть за одного из
игроков.

При оценке этого задания учитывается степень "интеллекта" бота. Реализация
стратегии "делать случайное (первое попавшееся и т.п.) возможное действие"
оценивается в 1 балл при условии, что бот играет по правилам и не делает
невозможных ходов.

### Нестандартное игровое поле и сохранение игры (2 балла)

Реализовать сохранение игры в файл и возможность игры до 10 игроков на игровом
поле, отличном от стандартного. Игровое поле читается из текстового файла,
который задаётся аргументом в командной строке. В первой строке этого файла
через пробел записано 5 целых положительных числа: первое -- ширина q игрового
поля, второе -- высота p игрового поля, третье -- число n игроков, четвёртое --
номер игрока, который ходит первым, и пятое -- число оставшихся у этого игрока
ходов (1, 2 или 3). Далее идут p строк по q символов в строке.
На игровом поле могут быть непроходимые клетки (т.е. клетки, в которые нельзя
ставить вирусы), которые обозначаются символом решётка, а обычные клетки
кодируются символом точка. Вирус игрока с номером i, обозначается i-й строчной
буквой английского алфавита, а его крепость -- аналогичной заглавной буквой.

При реализации нестандартного игрового поля можно дополнительно реализовать
клетки со специальными возможностями. 

#### Специальные возможности: нейтральные вирусы и крепости (1 балл)

На поле перед началом игры расставлены вирусы и крепости "нейтрального" игрока,
которые обозначаются соответственно буквами z (строчная) и Z (прописная).
Вирусы нейтрального игрока можно съесть, первратив их в свою крепость.  Крепости
нейтрального игрока могут быть частью цепи любого игрока (в том числе, они могут
являться звеньями цепей нескольких игроков одновременно).

#### Специальные возможности: порталы (1 балл)

На поле расставлены порталы -- клетки, обозначаемые цифрами от 0 до 9.  Клетка,
соседняя с порталом, обозначенным цифрой j, является соседней с любой клеткой
соседней с некоторым (возможно, тем же самым) порталом, обозначенным этой же
цифрой j.

#### Графический редактор уровней (до 2 баллов)

Реализовать графический пользовательский интерфейс для "рисования" игрового
поля. Если реализованы какие-то специальные возможности, то они должны быть
отражены и в графическом редакторе.

Реализация графического редактора оценивается в 1 балл, кроме того можно
получить 0.5 балла за реализацию расстановки нейтральных вирусов и крепостей в
редакторе и 0.5 балла за реализацию расстановки порталов в редакторе.

